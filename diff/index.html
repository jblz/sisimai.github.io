---
layout: document
title: Differences between Sisimai and bounceHammer
description: Differences between Sisimai and bounceHammer
author: azumakuniyuki
---
<a id = 'tohash' href = '#'></a>
<header id = 'home'>
    <div class = 'main-nav'>
        <div class = 'container'>
            <div class = 'navbar-header'>
                <button type = 'button' class = 'navbar-toggle' data-toggle = 'collapse' data-target = '.navbar-collapse'>
                    <span class = 'sr-only'>Toggle navigation</span>
                    <span class = 'icon-bar'></span>
                    <span class = 'icon-bar'></span>
                    <span class = 'icon-bar'></span>
                </button>
                <a class = 'navbar-brand' href = '/'>
                    <h1>
                        <img class = 'img-responsive' src = '/static/images/logo/sisimai-logotype-w11.png' 
                            width = '144' alt = 'Sisimai: Mail Analyzing Interface'>
                    </h1>
                </a>                    
            </div>
            <div class = 'collapse navbar-collapse'>
                <ul class = 'nav navbar-nav navbar-right'>                 
                    <li class = 'scroll active'><a href = '#index'>Differences</a></li>
                    <li class = 'scroll'><a href = '#problem'>Problems</a></li>
                    <li class = 'scroll'><a href = '#environment'>Environment</a></li> 
                    <li class = 'scroll'><a href = '#performance'>Performance</a></li> 
                    <li class = 'others'><a href = '/docs'>Documents</a></li>
                </ul>
            </div>
        </div>
    </div> <!-- /#main-nav -->
</header> <!-- /#home -->

<section id = 'index'>
    <div class = 'container'>
        <div class = 'heading'>
            <div class = 'row'>
                <div class = 'text-center col-sm-8 col-sm-offset-2'>
                    <img src = '/static/images/logo/sisimai-x01.png' width = '20%'>
                    <h2>Differences</h2>
                    <p class = 'description'>
                        The table in this page show differeces between {{ site.html.ss }}
                        ( both of the perl and the ruby version ) and {{ site.html.bh }}.
                    </p>
                    <hr>
                    <p class = 'description ja'>
                        このページの表ではシシマイ(Perl版とRuby版)と{{ site.html.bh }}の違い、
                        特に{{ site.html.ss }}の優位性を中心に説明しています。
                    </p>
                </div>
            </div> 
        </div>
        <div class = 'row'>
            <div class = 'text-center index-table'>
                <div class = 'col-sm-4 col-sm-offset-0'>
                    <div class = 'index-icon'>
                        <i class = 'fa fa-thumbs-o-up'></i>
                    </div>
                    <div class = 'index-info'>
                        <h3>Resolved Problems</h3>
                        <p class = 'description'>
                            Some unresolvable and serious problems ( {{ site.html.ss }} resolved these problems )
                            on the final version of {{ site.html.bh }}(v2.7.13).
                        </p>
                        <hr>
                        <p class = 'description ja'>
                            {{ site.html.bh }}に存在する解決困難で深刻な問題点({{ site.html.ss }}にて解決済)について
                        </p>
                    </div>
                    <a href = '#problem' class = 'btn btn-continue'>Read</a>
                </div>
                <div class = 'col-sm-4'>
                    <div class = 'index-icon'>
                        <i class = 'fa fa-desktop'></i>
                    </div>
                    <div class = 'index-info'>
                        <h3>Environment</h3>
                        <p class = 'description'>
                            Differences about environment for running {{ site.html.ss }}
                            ( both of the Perl and the Ruby version ) and all the versions of {{ site.html.bh }}.
                        </p>
                        <hr>
                        <p class = 'description ja'>
                            シシマイ(Perl版とRuby版)の動作環境周りにおける違い
                            ({{ site.html.bh }}と比較して)
                        </p>
                    </div>
                    <a href = '#environment' class = 'btn btn-continue'>Read</a>
                </div>
                <div class = 'col-sm-4'>
                    <div class = 'index-icon'>
                        <i class = 'fa fa-line-chart'></i>
                    </div>
                    <div class = 'index-info'>
                        <h3>Performance</h3>
                        <p class = 'description'>
                            Numerical advantages of performance in {{ site.html.ss }}
                            ( both of the Perl and the Ruby vesrion )
                            over the final version of {{ site.html.bh }}.
                        </p>
                        <hr>
                        <p class = 'description ja'>
                            {{ site.html.bh }}に対する{{ site.html.ss }}
                            (Perl版とRuby版)の性能における数値的な優位点について
                        </p>
                    </div>
                    <a href = '#content' class = 'btn btn-continue'>Read</a>
                </div>
            </div>
        </div>
    </div>
</section> <!-- /#index -->

<section id = 'problem' class = 'parallax'>
    <div class = 'container'>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'post-it'>
                    <i class = 'fa fa-thumbs-o-up'></i>
                </div>
            </div>
            <div class = 'heading col-sm-8 col-sm-offset-0'>
                <h2 class = 'in-desc'>Resolved Problems</h2>
                <p class = 'description'>
                    There are some unresolvable and serious problems related to precision of analysis
                    on the final version of {{ site.html.bh }}(v2.7.13).
                    {{ site.html.ss }} has been developed to resolve these problems.
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.bh }}の最終版(v2.7.13)には解決困難で深刻な解析精度に関わる問題点が幾つかあり、
                    それらの問題を解決する為に{{ site.html.ss }}は開発されました。
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-envelope'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>2 or more bounces in a single message</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} can detect all the recipient addresses and error reasons from 
                    <a href = 'https://github.com/sisimai/set-of-emails/blob/master/maildir/bsd/postfix-02.eml'
                       target = 'new'>a single message which include 2 or more bounce records</a>
                    like the following.
                    <em class = 'warn'>{{ site.html.bh }} can detect the first recipient address only.</em>
                </p>
                <hr>
                <p class = 'description ja'>
                    シシマイは下記のような
                    <a href = 'https://github.com/sisimai/set-of-emails/blob/master/maildir/bsd/postfix-02.eml'
                        target = 'new'>2件以上のバウンス記録を含む単一のメール</a>
                    から全ての受信者アドレスとエラー理由を検出する事が出来ます。
                    <em class = 'warn'>{{ site.html.bh }}は最初の一件のみ検出可能です。</em>
                </p>
                <pre class = 'prettyprint ltext'>
Content-Type: message/delivery-status

Reporting-MTA: dns; nijo.example.jp
Received-From-MTA: DNS; smtp-gateway.kyoto.ocn.ne.jp
Arrival-Date: Wed, 26 Feb 2014 06:05:47 -0500

Final-Recipient: RFC822; userunknown@example.org
Action: failed
Status: 5.1.1
Remote-MTA: DNS; mx.example.org
Diagnostic-Code: SMTP; 550 5.1.1 <userunknown@example.org>... User Unknown
Last-Attempt-Date: Wed, 26 Feb 2014 06:05:48 -0500

Final-Recipient: RFC822; filtered@example.com
Action: failed
Status: 5.2.1
Remote-MTA: DNS; mx.example.com
Diagnostic-Code: SMTP; 550 5.2.1 <filtered@example.com>... User Unknown
Last-Attempt-Date: Wed, 26 Feb 2014 06:05:48 -0500

--s1QB5ma0018057.1393412748/nijo.example.jp
Content-Type: message/rfc822
                </pre>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-google'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Bounce mails in Gmail mailbox</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} can parse bounce mails in Gmail mailbox.
                    <em class = 'warn'>{{ site.html.bh }} parse only old formatted bounce mails in Gmail mailbox.</em>
                </p>
                <hr>
                <p class = 'description ja'>
                    シシマイはGmailのメールボックスにあるバウンスメールも解析出来ます。
                    <em class = 'warn'>
                        {{ site.html.bh }}は古い形式のバウンスメールであればGmailのメールボックスにあるものでも
                        解析出来ますが、現在の形式のものは解析出来ません。
                    </em>
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-truck'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Status: 2.X.X</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} can parse and decide the reason to "delivered" properly a bounce message which includes
                    <kbd>Status: 2.1.5</kbd> line in its message body such as
                    <a href = 'https://github.com/sisimai/p5-Sisimai/blob/master/set-of-emails/maildir/bsd/rfc3464-28.eml'>
                        rfc3464-28.eml
                    </a>.
                </p>
                <p>
                    However, <em class = 'warn'>{{ site.html.bh }} decides the reason to "undefined"</em>
                    when parsed such email like the following.
                </p>
                <pre class = 'prettyprint'>
  {
    "token": "0ac0d79df3cc8ef4fc606334af840330",
    "description": {
      "timezoneoffset": "+0900",
      "subject": "Nyaaan",
      "smtpagent": "",
      "messageid": "<20151025071802.22CC00222233@neko-222-2222.vs.example.ne.jp>",
      "listid": "",
      "diagnosticcode": "smtp; 250 2.1.5 Ok",
      "deliverystatus": "2.1.5"
    },
    "frequency": 1,
    "bounced": 1430318085,
    "addresser": "root@neko-222-2222.vs.example.ne.jp",
    "recipient": "kijitora@neko.example.jp",
    "senderdomain": "neko-222-2222.vs.example.ne.jp",
    "destination": "neko.example.jp",
    <strong>"reason": "undefined",</strong>
    "hostgroup": "reserved",
    "provider": "reserved"
  },
                </pre>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.ss }}は<kbd>Status: 2.1.5</kbd>のような行を含むバウンスメール(
                    <a href = 'https://github.com/sisimai/p5-Sisimai/blob/master/set-of-emails/maildir/bsd/rfc3464-28.eml'>
                        rfc3464-28.eml
                    </a>)
                    を正しく解析し、バウンス理由を"delivered"として決定します。
                    しかし、
                    <em class = 'warn'>
                        {{ site.html.bh }}はこのようなメールを解析出来るものの、上記の出力例のように、
                        バウンス理由を"undefined"に決定してしまいます。
                    </em>
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-reply-all'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Feedback Loop message</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} deals ARF (Abuse Reporting Format) message for Feedback Loop, 
                    Many Email Service Providers such as
                    <a href = 'http://postmaster.aol.com/Postmaster.FeedbackLoop.php' target = 'new'>AOL</a>, 
                    <a href = 'https://help.yahoo.com/kb/complaint-feedback-loop-sln3438.html' target = 'new'>Yahoo!</a>,
                    as a bounce message and can parse it. 
                </p>
                <p class = 'description'>
                    Implementation of FBL in {{ site.html.bh }} is just an experimental and not fully support ARF message.
                </p>
                <hr>
                <p class = 'description ja'>
                    <a href = 'http://postmaster.aol.com/Postmaster.FeedbackLoop.php' target = 'new'>AOL</a>や
                    <a href = 'https://help.yahoo.com/kb/complaint-feedback-loop-sln3438.html' target = 'new'>Yahoo!</a>
                    など海外のメールサービスでは導入されているARF(Abuse Reporting Format)形式のメールも
                    {{ site.html.ss }}では解析可能です。
                </p>
                <p class = 'description ja'>
                    {{ site.html.bh }}のFBL対応はあくまでも実験的実装で、完全にARF形式のメールを解析する事は
                    できません。
                </p>
            </div>
        </div>

    </div>
</section>

<section id = 'environment'>
    <div class = 'container'>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'post-it'>
                    <i class = 'fa fa-desktop'></i>
                </div>
            </div>
            <div class = 'heading col-sm-8 col-sm-offset-0'>
                <h2 class = 'in-desc'>Environment</h2>
                <p class = 'description'>
                    Differences about environment for running {{ site.html.ss }}
                    ( both of the Perl and the Ruby version ) and all the versions of {{ site.html.bh }}.
                </p>
                <hr>
                <p class = 'description ja'>
                    シシマイ(Perl版とRuby版)の動作環境周りにおける違い
                    ({{ site.html.bh }}と比較して)
                </p>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-desktop'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>{{ site.html.ss }} works on Perl and Ruby</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} works on Perl 5.10.1 or later but {{ site.html.bh }} cannot work on 
                    Perl 5.16.1 or later. Therefore, for example, if the Perl version is 5.18 in a host which
                    you want to install {{ site.html.bh }}, you should install older version of Perl into
                    the host.
                </p>
                <p class = 'description'>
                    And then, beginning of {{ site.html.ss }} v4.14.2,
                    {{ site.html.ss }} works on both of Perl and Ruby ( including JRuby ).
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.ss }}はPerl 5.10.1以降で動作しますが{{ site.html.bh }}はPerl 5.16以降では
                    動作しません。ですので、例えば{{ site.html.bh }}をインストールしようとしているサーバー
                    のPerlが5.18であれば、古いバージョンのPerlを別途インストールする必要があります。
                </p>
                <p class = 'description ja'>
                    そして、{{ site.html.ss }} v4.14.2からは{{ site.html.ss }}はPerlでもRuby(JRubyを含む)でも動作します。
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-download'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Easy to install</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    To install {{ site.html.bh }} is troublesome because many tasks such as
                    downloading archive file, installing many many dependent Perl modules, and running
                    configure, make, make test, make install command before installation has completed.
                    However, to install {{ site.html.ss }} is very easy because the software could be
                    installed using <kbd>cpanm</kbd> or <kbd>gem</kbd> command.
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.bh }}をインストールする作業はやや面倒で、
                    アーカイブのダウンロード・多くの依存モジュールのインストール・
                    configure, make, make test, make installコマンドの実行を経て完了します。
                    一方、{{ site.html.ss }}のインストールは<kbd>cpanm</kbd>や<kbd>gem</kbd>コマンドでインストールが
                    出来るので非常に簡単です。
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-keyboard-o'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Command Line Tools, DB Schema, WebUI</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} have neigther command-line tools nor DB schema nor WebUI such as 
                    <kbd>bin/mailboxparser</kbd> in {{ site.html.bh }}. {{ site.html.ss }} is just 
                    a light-weight and a simple library. Command line tools or these environment you want
                    are better to be implemented on yourself as you like, we think.
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.ss }}には{{ site.html.bh }}の<kbd>bin/mailboxparser</kbd>や<kbd>bin/databasectl</kbd>
                    のようなコマンドラインツールは無く、またWebUIやDBスキーマも持っていません。
                    あくまでもモジュールのみの軽量でシンプルな提供形態です。
                    数行のコードで解析できるようになるので、ユーザ側で好きなようにコマンドラインツールを実装してください、
                    または既存のシステムに組み込んで実装してください、という方針です。
                </p>
            </div>
        </div>

    </div>
</section>

<section id = 'performance' class = 'parallax'>
    <div class = 'container'>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'post-it'>
                    <i class = 'fa fa-line-chart'></i>
                </div>
            </div>
            <div class = 'heading col-sm-8 col-sm-offset-0'>
                <h2 class = 'in-desc'>Performance</h2>
                <p class = 'description'>
                    Numerical advantages of performance in {{ site.html.ss }}
                    ( both of the Perl and the Ruby vesrion )
                    over the final version of {{ site.html.bh }}.
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.bh }}に対する{{ site.html.ss }}
                    (Perl版とRuby版)の性能における数値的な優位点について
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-line-chart'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>High Precision of Analysis</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    Precision of analysis in {{ site.html.ss }} is 2.0 times higher than
                    {{ site.html.bh }} because {{ site.html.ss }} have 
                    <a href = '/engine'>{{ site.sisimai.spec.modules }} MTA/MSP modules</a>.
                    And then, {{ site.html.ss }} can parse bounce mails via commercial MTA
                    such as Microsoft Exchange Server, IBM Notes and Domino, 
                    via Email Service Providers such as Amazon SES, WorkMail, SendGrid.
                </p>
                <hr>
                <p class = 'description ja'>
                    {{ site.html.ss }}は内部に
                    <a href = '/engine'>{{ site.sisimai.spec.modules }}個のMTA/MSP用解析モジュール</a>
                    を持っているので、その解析精度は{{ site.html.bh }}の約二倍を誇ります。
                    また、Microsoft Exchange ServerやIBM Notes and Dominoのような商用MTAや
                    Amazon SESやWorkMail, SendGridのような商用メールサービスからのバウンスメール
                    であっても{{ site.html.ss }}は解析する事が出来ます。
                </p>
            </div>
        </div>

        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-label'><i class = 'fa fa-tachometer'></i></div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <h3 class = 'in-desc'>Faster than {{ site.html.bh }}</h3>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-sm-1 col-sm-offset-1'>
                <div class = 'index-text'>Perl</div>
                <div class = 'index-text'>Ruby</div>
            </div>
            <div class = 'col-sm-8 col-sm-offset-0'>
                <p class = 'description'>
                    {{ site.html.ss }} can parse bounce mails and generate structured data
                    faster than {{ site.html.bh }} (bin/mailboxparser command).
                    Perl version of {{ site.html.ss }} is about 1.7 times faster,
                    Ruby version of {{ site.html.ss }} is about 1.1 times faster.
                </p>
                <hr>
                <p class = 'description ja'>
                    シシマイは{{ site.html.bh }}のbin/mailboxparserコマンドよりも高速にメールを解析し、
                    構造化されたデータを生成します。
                    Perl版{{ site.html.ss }}で約1.7倍、
                    Ruby版{{ site.html.ss }}で約1.1倍高速です。
                </p>
            </div>
        </div>




    </div>
</section>
